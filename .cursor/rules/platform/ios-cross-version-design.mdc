# iOS Cross-Version Design Rules

## üéØ Core Principles

### üî¥ **MANDATORY**: Cross-Version Design is REQUIRED for iOS Projects

**CRITICAL RULE**: T·∫•t c·∫£ iOS projects B·∫ÆT BU·ªòC ph·∫£i implement Cross-Version Design patterns. Kh√¥ng ƒë∆∞·ª£c thi·∫øt k·∫ø cho m·ªôt iOS version duy nh·∫•t.

### 1. **Progressive Enhancement** ‚≠ê **REQUIRED**
- **B·∫ÆT BU·ªòC**: Design for the lowest supported iOS version first (iOS 17+)
- **B·∫ÆT BU·ªòC**: Add enhancements for newer versions progressively
- **B·∫ÆT BU·ªòC**: Ensure graceful degradation for older versions
- **KH√îNG ƒê∆Ø·ª¢C**: Thi·∫øt k·∫ø ch·ªâ cho iOS version m·ªõi nh·∫•t

### 2. **Design System Consistency** ‚≠ê **REQUIRED**
- **B·∫ÆT BU·ªòC**: Maintain consistent visual hierarchy across all iOS versions
- **B·∫ÆT BU·ªòC**: Use adaptive design patterns that work across versions
- **B·∫ÆT BU·ªòC**: Implement version-specific enhancements without breaking core functionality
- **KH√îNG ƒê∆Ø·ª¢C**: S·ª≠ d·ª•ng design patterns ch·ªâ ho·∫°t ƒë·ªông tr√™n iOS version c·ª• th·ªÉ

### 3. **Future-Proof Architecture** ‚≠ê **REQUIRED**
- **B·∫ÆT BU·ªòC**: Build with upcoming iOS versions in mind (iOS 26+)
- **B·∫ÆT BU·ªòC**: Use flexible design patterns that can adapt to new design languages
- **B·∫ÆT BU·ªòC**: Implement modular components that can be easily updated
- **KH√îNG ƒê∆Ø·ª¢C**: Hard-code design cho iOS version hi·ªán t·∫°i

## üèóÔ∏è Architecture Framework

### Design Layer Structure
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           iOS 26+ Features          ‚îÇ ‚Üê Latest design language
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ           iOS 18 Features           ‚îÇ ‚Üê Modern design patterns
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ           iOS 17 Features           ‚îÇ ‚Üê Core functionality
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ        Base Design System           ‚îÇ ‚Üê Universal patterns
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üé® Design Patterns

### 1. **Transparent Header Pattern**

#### Implementation Strategy
```swift
// Base implementation for all iOS versions
private func setupNavigationBarAppearance() {
    let appearance = UINavigationBarAppearance()

    // iOS 17+ compatible
    appearance.configureWithTransparentBackground()
    appearance.backgroundColor = .clear
    appearance.shadowColor = .clear

    // Apply to all appearances
    UINavigationBar.appearance().standardAppearance = appearance
    UINavigationBar.appearance().compactAppearance = appearance
    UINavigationBar.appearance().scrollEdgeAppearance = appearance

    // Ensure text visibility
    appearance.titleTextAttributes = [.foregroundColor: UIColor.label]
}
```

#### Content Layout Strategy
```swift
// Proper spacing for transparent headers
ScrollView {
    VStack {
        // Content
    }
    .padding(.top, 120) // Space for transparent header + safe area
    .ignoresSafeArea(.container, edges: .top)
}
.safeAreaInset(edge: .top) {
    Color.clear.frame(height: 0) // Transparent spacer
}
```

### 2. **Liquid Glass Effects**

#### Tab Bar Implementation
```swift
private func setupTabBarAppearance() {
    let appearance = UITabBarAppearance()
    appearance.configureWithTransparentBackground()

    // Liquid glass effect
    appearance.backgroundEffect = UIBlurEffect(style: .systemUltraThinMaterial)
    appearance.backgroundColor = UIColor.systemBackground.withAlphaComponent(0.8)

    // Modern rounded corners
    UITabBar.appearance().layer.cornerRadius = 25
    UITabBar.appearance().clipsToBounds = true

    // Floating shadow
    UITabBar.appearance().layer.shadowColor = UIColor.black.cgColor
    UITabBar.appearance().layer.shadowOffset = CGSize(width: 0, height: -2)
    UITabBar.appearance().layer.shadowRadius = 10
    UITabBar.appearance().layer.shadowOpacity = 0.1
}
```

### 3. **Adaptive Card System**

#### Base Card Component
```swift
struct AdaptiveCard: View {
    let content: AnyView
    let style: CardStyle

    var body: some View {
        content
            .padding(Theme.Spacing.lg)
            .background(
                RoundedRectangle(cornerRadius: style.cornerRadius)
                    .fill(style.backgroundColor)
                    .shadow(
                        color: style.shadowColor,
                        radius: style.shadowRadius,
                        x: style.shadowOffset.x,
                        y: style.shadowOffset.y
                    )
            )
    }
}

enum CardStyle {
    case standard
    case elevated
    case floating

    var cornerRadius: CGFloat {
        switch self {
        case .standard: return 16
        case .elevated: return 20
        case .floating: return 25
        }
    }

    var backgroundColor: Color {
        switch self {
        case .standard: return Color.white
        case .elevated: return Color.white
        case .floating: return Color.white.opacity(0.9)
        }
    }

    var shadowColor: Color {
        switch self {
        case .standard: return Color.black.opacity(0.04)
        case .elevated: return Color.black.opacity(0.05)
        case .floating: return Color.black.opacity(0.1)
        }
    }

    var shadowRadius: CGFloat {
        switch self {
        case .standard: return 8
        case .elevated: return 10
        case .floating: return 15
        }
    }

    var shadowOffset: CGSize {
        switch self {
        case .standard: return CGSize(width: 0, height: 2)
        case .elevated: return CGSize(width: 0, height: 4)
        case .floating: return CGSize(width: 0, height: -2)
        }
    }
}
```

## üì± iOS Version-Specific Implementations

### iOS 17+ Features
```swift
// Material effects
.background(.ultraThinMaterial)
.background(.regularMaterial)
.background(.thickMaterial)

// Safe area handling
.ignoresSafeArea(.container, edges: .top)
.safeAreaInset(edge: .top) { /* content */ }

// Navigation
NavigationStack { /* content */ }
```

### iOS 18+ Features
```swift
// Enhanced blur effects
UIBlurEffect(style: .systemUltraThinMaterial)
UIBlurEffect(style: .systemMaterial)

// Advanced animations
.animation(.easeInOut(duration: 0.3), value: state)
.transition(.asymmetric(insertion: .scale, removal: .opacity))
```

### iOS 26+ Features (Future)
```swift
// Liquid glass effects
.fill(.liquidGlass)
.background(.adaptiveGlass)

// Advanced floating elements
.floatingEffect()
.dynamicIslandIntegration()
```

## üé® Design System Components

### Theme System
```swift
struct Theme {
    struct Colors {
        // Adaptive colors that work across iOS versions
        static let primary = Color.adaptive(.systemBlue)
        static let secondary = Color.adaptive(.systemGray)
        static let background = Color.adaptive(.systemBackground)
        static let cardBackground = Color.adaptive(.secondarySystemBackground)
    }

    struct Spacing {
        static let xs: CGFloat = 4
        static let sm: CGFloat = 8
        static let md: CGFloat = 16
        static let lg: CGFloat = 24
        static let xl: CGFloat = 32
    }

    struct CornerRadius {
        static let sm: CGFloat = 8
        static let md: CGFloat = 12
        static let lg: CGFloat = 16
        static let xl: CGFloat = 20
        static let floating: CGFloat = 25
    }
}

extension Color {
    static func adaptive(_ color: UIColor) -> Color {
        return Color(color)
    }
}
```

## üîß Implementation Guidelines

### üî¥ **MANDATORY IMPLEMENTATION STEPS**

**CRITICAL**: T·∫•t c·∫£ iOS projects B·∫ÆT BU·ªòC ph·∫£i follow c√°c b∆∞·ªõc implementation sau. Kh√¥ng ƒë∆∞·ª£c b·ªè qua b·∫•t k·ª≥ b∆∞·ªõc n√†o.

### 1. **Version Detection** ‚≠ê **REQUIRED**
```swift
struct iOSVersionDetector {
    static var currentVersion: iOSVersion {
        let version = ProcessInfo.processInfo.operatingSystemVersion
        return iOSVersion(major: version.majorVersion, minor: version.minorVersion)
    }

    static var supportsTransparentHeaders: Bool {
        return currentVersion >= iOSVersion(major: 17, minor: 0)
    }

    static var supportsLiquidGlass: Bool {
        return currentVersion >= iOSVersion(major: 18, minor: 0)
    }

    static var supportsAdvancedEffects: Bool {
        return currentVersion >= iOSVersion(major: 26, minor: 0)
    }
}
```

### 2. **Cross-Version Base View**
```swift
protocol CrossVersionView: View {
    associatedtype Content: View

    var content: Content { get }
    var style: ViewStyle { get }
}

enum ViewStyle {
    case standard
    case modern
    case future
}

extension CrossVersionView {
    var body: some View {
        content
            .applyStyle(style)
            .adaptToiOSVersion()
    }
}
```

## üìã Implementation Checklist

### Pre-Development
- [ ] Define target iOS versions
- [ ] Set up design system structure
- [ ] Create base components
- [ ] Implement version detection

### Development Phase
‚ú® **MANDATORY**: B·∫§T BU·ªòC ph·∫£i implement theo th·ª© t·ª± sau:
1. **Base Design System** - Implement theme system tr∆∞·ªõc
2. **Version Detection** - Implement iOSVersionDetector
3. **Core Components** - Implement AdaptiveCard, TransparentHeader
4. **Version-Specific Features** - Add progressive enhancements
5. **Testing** - Test tr√™n t·∫•t c·∫£ target iOS versions

### Post-Development
- [ ] Document version-specific features
- [ ] Create migration guide for future iOS versions
- [ ] Update design system as needed
- [ ] Share learnings with team

## üöÄ Migration Strategy

### For New Projects
1. Start with base design system
2. Implement core functionality for lowest iOS version
3. Add progressive enhancements for newer versions
4. Test thoroughly across all versions

### For Existing Projects
1. Audit current design patterns
2. Identify areas needing cross-version compatibility
3. Implement adaptive components gradually
4. Maintain backward compatibility

### Future iOS Versions
1. Monitor iOS design language changes
2. Update design system components
3. Add new features as progressive enhancements
4. Maintain graceful degradation

## üìö Best Practices

### 1. **Design Consistency**
- Use consistent spacing and typography
- Maintain visual hierarchy across versions
- Implement adaptive color schemes
- Test on multiple device sizes

### 2. **Performance Optimization**
- Use efficient blur effects
- Optimize shadow rendering
- Implement proper memory management
- Test performance on older devices

### 3. **Accessibility**
- Ensure proper contrast ratios
- Implement VoiceOver support
- Test with accessibility features
- Maintain usability across versions

### 4. **Testing Strategy**
- Test on physical devices
- Use iOS Simulator for different versions
- Implement automated UI tests
- Regular regression testing

## üîÆ Future Considerations

### Upcoming iOS Features
- Advanced liquid glass effects
- Enhanced dynamic island integration
- Improved material design
- Better accessibility features

### Design Evolution
- Monitor Apple's design guidelines
- Adapt to new design languages
- Maintain backward compatibility
- Plan for future iOS versions

## üéØ Quick Implementation Guide

### üî¥ **MANDATORY IMPLEMENTATION CHECKLIST**

**CRITICAL**: T·∫•t c·∫£ iOS projects B·∫ÆT BU·ªòC ph·∫£i follow checklist n√†y. Kh√¥ng ƒë∆∞·ª£c skip b·∫•t k·ª≥ step n√†o.

### Step 1: Project Setup ‚≠ê **REQUIRED**
```bash
mkdir -p App/Presentation/{Views,Components,Theme}
mkdir -p App/Utils
```

### Step 2: Create Theme System ‚≠ê **REQUIRED**
```swift
// App/Presentation/Theme/Theme.swift
import SwiftUI

struct Theme {
    struct Colors {
        static let primary = Color(red: 0.97, green: 0.73, blue: 0.82)
        static let accent = Color(red: 0.56, green:  conduct: 0.98)
        static let background = Color(red: 0.98, green: 0.97, blue: 0.99)
        static let cardBackground = Color.white
        static let textPrimary = Color(red: 0.2, green: 0.26, blue: 0.26)
        static let textSecondary = Color(red: 0.46, green: 0.46, blue: 0.46)
        static let success = Color(red: 0.55, green: 0.76, blue: 0.29)
        static let warning = Color(red: 1.0, green: 0.92, blue: 0.46)
        static let error = Color(red: 0.94, green: 0.6, blue: 0.6)
    }

    struct Spacing {
        static let xs: CGFloat = 4
        static let sm: CGFloat = 8
        static let md: CGFloat = 16
        static let lg: CGFloat = 24
        static let xl: CGFloat = 32
    }

    struct CornerRadius {
        static let sm: CGFloat = 8
        static let md: CGFloat = 12
        static let lg: CGFloat = 16
        static let xl: CGFloat = 20
        static let floating: CGFloat = 25
    }
}
```

### Step 3: Implement Version Detection ‚≠ê **REQUIRED**
```swift
// App/Utils/iOSVersionDetector.swift
import Foundation

struct iOSVersionDetector {
    static var currentVersion: iOSVersion {
        let version = ProcessInfo.processInfo.operatingSystemVersion
        return iOSVersion(major: version.majorVersion, minor: version.minorVersion)
    }

    static var supportsTransparentHeaders: Bool {
        return currentVersion >= iOSVersion(major: 17, minor: 0)
    }

    static var supportsLiquidGlass: Bool {
        return currentVersion >= iOSVersion(major: 18, minor: 0)
    }

    static var supportsAdvancedEffects: Bool {
        return currentVersion >= iOSVersion(major: 26, minor: 0)
    }
}

struct iOSVersion {
    let major: Int
    let minor: Int

    static func >= (lhs: iOSVersion, rhs: iOSVersion) -> Bool {
        if lhs.major > rhs.major { return true }
        if lhs.major == rhs.major { return lhs.minor >= rhs.minor }
        return false
    }
}
```

### Step 4: Create Base Components ‚≠ê **REQUIRED**
```swift
// App/Presentation/Components/Cards/AdaptiveCard.swift
import SwiftUI

struct AdaptiveCard<Content: View>: View {
    let content: Content
    let style: CardStyle

    init(style: CardStyle = .standard, @ViewBuilder content: () -> Content) {
        self.style = style
        self.content = content()
    }

    var body: some View {
        content
            .padding(Theme.Spacing.lg)
            .background(
                RoundedRectangle(cornerRadius: style.cornerRadius)
                    .fill(style.backgroundColor)
                    .shadow(
                        color: style.shadowColor,
                        radius: style.shadowRadius,
                        x: style.shadowOffset.x,
                        y: style.shadowOffset.y
                    )
            )
    }
}

enum CardStyle {
    case standard
    case elevated
    case floating

    var cornerRadius: CGFloat {
        switch self {
        case .standard: return 16
        case .elevated: return 20
        case .floating: return 25
        }
    }

    var backgroundColor: Color {
        switch self {
        case .standard: return Theme.Colors.cardBackground
        case .elevated: return Theme.Colors.cardBackground
        case .floating: return Theme.Colors.cardBackground.opacity(0.9)
        }
    }

    var shadowColor: Color {
        switch self {
        case .standard: return Color.black.opacity(0.04)
        case .elevated: return Color.black.opacity(0.05)
        case .floating: return Color.black.opacity(0.1)
        }
    }

    var shadowRadius: CGFloat {
        switch self {
        case .standard: return 8
        case .elevated: return 10
        case .floating: return 15
        }
    }

    var shadowOffset: CGSize {
        switch self {
        case .standard: return CGSize(width: 0, height: 2)
        case .elevated: return CGSize(width: 0, height: 4)
        case .floating: return CGSize(width: 0, height: -2)
        }
    }
}
```

### Step 5: Implement Navigation Setup ‚≠ê **REQUIRED**
```swift
// App/Presentation/Components/Navigation/NavigationSetup.swift
import SwiftUI
import UIKit

struct NavigationSetup {
    static func configureTransparentNavigation() {
        let appearance = UINavigationBarAppearance()
        appearance.configureWithTransparentBackground()
        appearance.backgroundColor = .clear
        appearance.shadowColor = .clear

        // Apply to all appearances
        UINavigationBar.appearance().standardAppearance = appearance
        UINavigationBar.appearance().compactAppearance = appearance
        UINavigationBar.appearance().scrollEdgeAppearance = appearance

        // Ensure text visibility
        appearance.titleTextAttributes = [.foregroundColor: UIColor.label]
    }

    static func configureLiquidGlassTabBar() {
        let appearance = UITabBarAppearance()
        appearance.configureWithTransparentBackground()

        // Liquid glass effect
        appearance.backgroundEffect = UIBlurEffect(style: .systemUltraThinMaterial)
        appearance.backgroundColor = UIColor.systemBackground.withAlphaComponent(0.8)

        // Modern rounded corners
        UITabBar.appearance().layer.cornerRadius = 25
        UITabBar.appearance().clipsToBounds = true

        // Floating shadow
        UITabBar.appearance().layer.shadowColor = UIColor.black.cgColor
        UITabBar.appearance().layer.shadowOffset = CGSize(width: 0, height: -2)
        UITabBar.appearance().layer.shadowRadius = 10
        UITabBar.appearance().layer.shadowOpacity = 0.1

        // Apply appearances
        UITabBar.appearance().standardAppearance = appearance
        UITabBar.appearance().scrollEdgeAppearance = appearance
    }
}
```

## üß™ Testing Checklist

### üî¥ **MANDATORY TESTING REQUIREMENTS**

**CRITICAL**: T·∫•t c·∫£ iOS projects B·∫ÆT BU·ªòC ph·∫£i pass t·∫•t c·∫£ tests sau. Kh√¥ng ƒë∆∞·ª£c deploy n·∫øu thi·∫øu b·∫•t k·ª≥ test n√†o.

### Cross-Version Testing ‚≠ê **REQUIRED**
- [ ] Test on iOS 17.0+
- [ ] Test on iOS 18.0+
- [ ] Test on iOS 26+ (when available)
- [ ] Verify transparent header functionality
- [ ] Verify liquid glass effects
- [ ] Test performance on older devices

### Device Testing ‚≠ê **REQUIRED**
- [ ] iPhone SE (small screen)
- [ ] iPhone 15 (standard screen)
- [ ] iPhone 15 Plus (large screen)
- [ ] iPad (if applicable)

### Accessibility Testing ‚≠ê **REQUIRED**
- [ ] VoiceOver compatibility
- [ ] Dynamic Type support
- [ ] High contrast mode
- [ ] Reduce motion preferences

## üöÄ Deployment

### üî¥ **MANDATORY DEPLOYMENT REQUIREMENTS**

**CRITICAL**: T·∫•t c·∫£ iOS projects B·∫ÆT BU·ªòC ph·∫£i follow c√°c requirements sau tr∆∞·ªõc khi deploy.

### App Store Preparation ‚≠ê **REQUIRED**
1. Update deployment target to iOS 17.0+
2. Test on all supported devices
3. Verify performance metrics
4. Update app description with new features

### Version-Specific Features ‚≠ê **REQUIRED**
- Document iOS version requirements
- Implement feature detection
- Provide fallbacks for older versions
- Update user documentation

---

### üî¥ **FINAL MANDATORY REMINDER**

**CRITICAL**: Cross-Version Design is NOT optional. It is MANDATORY for ALL iOS projects. Every iOS app MUST implement these patterns to ensure compatibility across iOS versions.

**FAILURE TO COMPLY**: Projects that do not implement Cross-Version Design patterns will be rejected during code review.

---

_This methodology ensures consistent, modern, and future-proof iOS application design across multiple iOS versions while maintaining optimal user experience and performance. Cross-Version Design is MANDATORY for all iOS projects._
